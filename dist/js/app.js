/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.l = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// identity function for calling harmory imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };

/******/ 	// define getter function for harmory exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		Object.defineProperty(exports, name, {
/******/ 			configurable: false,
/******/ 			enumerable: true,
/******/ 			get: getter
/******/ 		});
/******/ 	};

/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};

/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

eval("var container;\r\nvar camera, scene, projector, renderer, mixer;\r\n\r\nvar pablo, aquarium, waterLevel, waterLevelTarget = 1;\r\n\r\nvar spline, counter = 0;\r\nvar pabloIsDead = false;\r\n\r\nvar tangent = new THREE.Vector3();\r\nvar axis = new THREE.Vector3();\r\nvar up = new THREE.Vector3(0, 0, 1);\r\n\r\nvar pastDay = 0;\r\nvar currentDay = 0;\r\n\r\nvar depleteFactor = 0.002;\r\n\r\ninit();\r\nanimate();\r\n\r\nsetWaterLevel(100);\r\n\r\nfunction init() {\r\n\r\n    container = document.createElement( 'div' );\r\n    document.querySelector('#pablo').appendChild( container );\r\n\r\n\r\n    //\r\n\r\n    scene = new THREE.Scene();\r\n\r\n    // Create a camera\r\n    camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 1000 );\r\n    camera.position.z = 100;\r\n\r\n    // Create a directional light and position it like the camera, sort of\r\n    var dirLight = new THREE.DirectionalLight( 0xffffff, 0.6 );\r\n    dirLight.position = camera.position;\r\n    dirLight.rotation = camera.rotation;\r\n    dirLight.position.x += 300;\r\n    dirLight.position.y += 300;\r\n    scene.add(dirLight);\r\n\r\n    // Create an ambient light\r\n    var ambLight = new THREE.AmbientLight( 0xffffff, 0.8 );\r\n    ambLight.position.y = 1000;\r\n    scene.add(ambLight);\r\n\r\n    var loader = new THREE.JSONLoader();\r\n    loader.load( \"../models/pablo-escofish2.json\", function( geometry, materials ) {\r\n        for ( var i = 0; i < materials.length; i ++ ) {\r\n            var m = materials[ i ];\r\n            //m.skinning = true;\r\n            m.morphTargets = true;\r\n            // console.log(m);\r\n        }\r\n        pablo  = new THREE.SkinnedMesh( geometry, new THREE.MeshFaceMaterial( materials ) );\r\n\r\n        // pablo = new THREE.Mesh( geometry, new THREE.MultiMaterials( {\r\n        //     vertexColors: THREE.FaceColors,\r\n        //     morphTargets: true\r\n        // } ) );\r\n        pablo.scale.set( 1, 1, 1 );\r\n        scene.add( pablo );\r\n\r\n        // console.log(scene);\r\n\r\n        mixer = new THREE.AnimationMixer( pablo );\r\n\r\n        var clip = THREE.AnimationClip.CreateFromMorphTargetSequence( 'skeletalAction.001', geometry.morphTargets, 30, false );\r\n        // console.log(clip);\r\n        mixer.clipAction( clip ).setDuration( 2 ).play();\r\n\r\n    } );\r\n\r\n    // Create the water level\r\n    waterLevel = new THREE.Object3D();\r\n    waterLevel.add( new THREE.Mesh(\r\n        new THREE.BoxGeometry(100, 60, 70),\r\n\r\n        new THREE.MeshPhongMaterial( {\r\n            color: 0x156289,\r\n            emissive: 0x072534,\r\n            side: THREE.DoubleSide,\r\n            shading: THREE.FlatShading,\r\n            transparent: true,\r\n            opacity: 0.4\r\n        } )\r\n    ) );\r\n\r\n    // Set it at the bottom of the aquarium\r\n    waterLevel.position.y = -4.99;\r\n\r\n    // Add to scene\r\n    scene.add( waterLevel );\r\n\r\n    // Create the glass aquarium\r\n    aquarium = new THREE.Object3D();\r\n    aquarium.add( new THREE.Mesh(\r\n        new THREE.BoxGeometry(100, 70, 70),\r\n\r\n        new THREE.MeshPhongMaterial( {\r\n            color: 0xE0EAE7,\r\n            // emissive: 0x072534,\r\n            side: THREE.DoubleSide,\r\n            shading: THREE.FlatShading,\r\n            transparent: true,\r\n            opacity: 0.2\r\n        } )\r\n    ) );\r\n\r\n    // Add to scene\r\n    scene.add( aquarium );\r\n\r\n    //\r\n\r\n    var numPoints = 50;\r\n\r\n    spline = new THREE.SplineCurve3([\r\n        new THREE.Vector3(0, 0, 0),\r\n        new THREE.Vector3(20, 0, 20),\r\n        new THREE.Vector3(40, 0, 0),\r\n        new THREE.Vector3(0, 0, -40),\r\n        new THREE.Vector3(-25, 0, 0),\r\n        new THREE.Vector3(-15, 0, 5),\r\n        new THREE.Vector3(-10, 0, -20),\r\n        new THREE.Vector3(0, 0, 0)]);\r\n\r\n    var material = new THREE.LineBasicMaterial({\r\n        color: 0xff00f0,\r\n    });\r\n\r\n    var geometry = new THREE.Geometry();\r\n    var splinePoints = spline.getPoints(numPoints);\r\n\r\n    for (var i = 0; i < splinePoints.length; i++) {\r\n        geometry.vertices.push(splinePoints[i]);\r\n    }\r\n\r\n    // uncomment if we want to show the path\r\n    // line = new THREE.Line(geometry, material);\r\n    // scene.add(line);\r\n\r\n    //\r\n\r\n    renderer = new THREE.WebGLRenderer();\r\n    renderer.setClearColor( 0xf0f0f0 );\r\n    renderer.setPixelRatio( window.devicePixelRatio );\r\n    renderer.setSize( window.innerWidth, window.innerHeight );\r\n    container.appendChild(renderer.domElement);\r\n\r\n    // Render the objects in the scene in the order they were created\r\n    renderer.sortObjects = false;\r\n\r\n    // Create the controls to rotate the aquarium\r\n    var orbit = new THREE.OrbitControls( camera, renderer.domElement );\r\n    orbit.enableZoom = false;\r\n\r\n    // Lock the rotation in x-axis, meaning we can't look above or below the aquarium\r\n    orbit.minPolarAngle = Math.PI / 2; // radians\r\n    orbit.maxPolarAngle = Math.PI / 2; // radians\r\n\r\n    // How far you can orbit horizontally, upper and lower limits.\r\n    // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n    orbit.minAzimuthAngle = - Math.PI / 2; // radians\r\n    orbit.maxAzimuthAngle = Math.PI / 2; // radians\r\n\r\n    //\r\n\r\n    window.addEventListener( 'resize', onWindowResize, false );\r\n\r\n}\r\n\r\nfunction onWindowResize() {\r\n\r\n    camera.aspect = window.innerWidth / window.innerHeight;\r\n    camera.updateProjectionMatrix();\r\n\r\n    renderer.setSize( window.innerWidth, window.innerHeight );\r\n\r\n}\r\n\r\n//\r\nvar prevTime = Date.now();\r\nfunction animateFish() {\r\n    if (counter <= 1) {\r\n        var splinePoint = spline.getPointAt(counter);\r\n\r\n        splinePoint.y -= depleteFactor * 30;\r\n\r\n\r\n        if(pablo.position.y < -35 && !pabloIsDead){\r\n            pablo.position.y = -35;\r\n            pabloIsDead = true;\r\n            prevTime = Date.now();\r\n        } else if(pabloIsDead) {\r\n            var time = Date.now();\r\n\r\n            // Run the animation when Pablo hits the bottom of the tank\r\n            mixer.update( ( time - prevTime ) * 0.001 );\r\n\r\n            prevTime = time;\r\n        }\r\n        else {\r\n            pablo.position.x = splinePoint.x;\r\n            pablo.position.y = (waterLevel.scale.y * 41) - 35;\r\n            pablo.position.z = splinePoint.z;\r\n\r\n            tangent = spline.getTangentAt(counter).normalize();\r\n\r\n            axis.crossVectors(up, tangent).normalize();\r\n\r\n            var radians = Math.acos(up.dot(tangent));\r\n\r\n            pablo.quaternion.setFromAxisAngle(axis, radians);\r\n        }\r\n\r\n        counter += 0.001\r\n    } else {\r\n        counter = 0;\r\n    }\r\n}\r\n\r\nfunction animate() {\r\n\r\n    requestAnimationFrame( animate );\r\n\r\n    render();\r\n}\r\n\r\n\r\n\r\nfunction calculateWaterLevel( consumption ) {\r\n    var avgConsumption = 160;\r\n    var dConsumption = avgConsumption - consumption;\r\n    var perc = dConsumption / avgConsumption;\r\n\r\n    return(perc);\r\n}\r\n\r\nfunction setWaterLevel( cons ){\r\n    waterLevelTarget += calculateWaterLevel(cons);\r\n    if(waterLevelTarget > 1){\r\n        waterLevelTarget = 1;\r\n    } else if(waterLevelTarget < 0){\r\n        waterLevelTarget = 0;\r\n    }\r\n}\r\n\r\nfunction getLastDayConsumption(){\r\n    // console.log(pastDay, currentDay, user.currentDay, pastDay !== user.currentDay);\r\n    if(user.currentDay !== currentDay){\r\n        currentDay = user.currentDay;\r\n\r\n        if(currentDay -1 < 0){\r\n            pastDay = 6;\r\n        } else{\r\n            pastDay = currentDay -1;\r\n        }\r\n        setWaterLevel(data[pastDay].water);\r\n    }\r\n}\r\n\r\n\r\nfunction render() {\r\n\r\n    animateFish();\r\n\r\n    getLastDayConsumption();\r\n\r\n    if(waterLevel.scale.y > waterLevelTarget && waterLevel.scale.y > 0){\r\n        // If the water isn't already completely depleted, lower the water level\r\n        waterLevel.scale.y -= depleteFactor;\r\n        waterLevel.position.y -= (depleteFactor * 30);\r\n    } else if(waterLevel.scale.y < waterLevelTarget && waterLevel.scale.y <= 1){\r\n        // If the water isn't already completely depleted, lower the water level\r\n        waterLevel.scale.y += depleteFactor;\r\n        waterLevel.position.y += (depleteFactor * 30);\r\n    }else{\r\n        // DO NOTHING\r\n    }\r\n\r\n    renderer.render( scene, camera );\r\n\r\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvYXBwLmpzPzcxNmYiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGNvbnRhaW5lcjtcclxudmFyIGNhbWVyYSwgc2NlbmUsIHByb2plY3RvciwgcmVuZGVyZXIsIG1peGVyO1xyXG5cclxudmFyIHBhYmxvLCBhcXVhcml1bSwgd2F0ZXJMZXZlbCwgd2F0ZXJMZXZlbFRhcmdldCA9IDE7XHJcblxyXG52YXIgc3BsaW5lLCBjb3VudGVyID0gMDtcclxudmFyIHBhYmxvSXNEZWFkID0gZmFsc2U7XHJcblxyXG52YXIgdGFuZ2VudCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbnZhciBheGlzID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxudmFyIHVwID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMSk7XHJcblxyXG52YXIgcGFzdERheSA9IDA7XHJcbnZhciBjdXJyZW50RGF5ID0gMDtcclxuXHJcbmNvbnN0IGRlcGxldGVGYWN0b3IgPSAwLjAwMjtcclxuXHJcbmluaXQoKTtcclxuYW5pbWF0ZSgpO1xyXG5cclxuc2V0V2F0ZXJMZXZlbCgxMDApO1xyXG5cclxuZnVuY3Rpb24gaW5pdCgpIHtcclxuXHJcbiAgICBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BhYmxvJykuYXBwZW5kQ2hpbGQoIGNvbnRhaW5lciApO1xyXG5cclxuXHJcbiAgICAvL1xyXG5cclxuICAgIHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGEgY2FtZXJhXHJcbiAgICBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoIDc1LCB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgMSwgMTAwMCApO1xyXG4gICAgY2FtZXJhLnBvc2l0aW9uLnogPSAxMDA7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGEgZGlyZWN0aW9uYWwgbGlnaHQgYW5kIHBvc2l0aW9uIGl0IGxpa2UgdGhlIGNhbWVyYSwgc29ydCBvZlxyXG4gICAgdmFyIGRpckxpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoIDB4ZmZmZmZmLCAwLjYgKTtcclxuICAgIGRpckxpZ2h0LnBvc2l0aW9uID0gY2FtZXJhLnBvc2l0aW9uO1xyXG4gICAgZGlyTGlnaHQucm90YXRpb24gPSBjYW1lcmEucm90YXRpb247XHJcbiAgICBkaXJMaWdodC5wb3NpdGlvbi54ICs9IDMwMDtcclxuICAgIGRpckxpZ2h0LnBvc2l0aW9uLnkgKz0gMzAwO1xyXG4gICAgc2NlbmUuYWRkKGRpckxpZ2h0KTtcclxuXHJcbiAgICAvLyBDcmVhdGUgYW4gYW1iaWVudCBsaWdodFxyXG4gICAgdmFyIGFtYkxpZ2h0ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCggMHhmZmZmZmYsIDAuOCApO1xyXG4gICAgYW1iTGlnaHQucG9zaXRpb24ueSA9IDEwMDA7XHJcbiAgICBzY2VuZS5hZGQoYW1iTGlnaHQpO1xyXG5cclxuICAgIHZhciBsb2FkZXIgPSBuZXcgVEhSRUUuSlNPTkxvYWRlcigpO1xyXG4gICAgbG9hZGVyLmxvYWQoIFwiLi4vbW9kZWxzL3BhYmxvLWVzY29maXNoMi5qc29uXCIsIGZ1bmN0aW9uKCBnZW9tZXRyeSwgbWF0ZXJpYWxzICkge1xyXG4gICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IG1hdGVyaWFscy5sZW5ndGg7IGkgKysgKSB7XHJcbiAgICAgICAgICAgIHZhciBtID0gbWF0ZXJpYWxzWyBpIF07XHJcbiAgICAgICAgICAgIC8vbS5za2lubmluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIG0ubW9ycGhUYXJnZXRzID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBhYmxvICA9IG5ldyBUSFJFRS5Ta2lubmVkTWVzaCggZ2VvbWV0cnksIG5ldyBUSFJFRS5NZXNoRmFjZU1hdGVyaWFsKCBtYXRlcmlhbHMgKSApO1xyXG5cclxuICAgICAgICAvLyBwYWJsbyA9IG5ldyBUSFJFRS5NZXNoKCBnZW9tZXRyeSwgbmV3IFRIUkVFLk11bHRpTWF0ZXJpYWxzKCB7XHJcbiAgICAgICAgLy8gICAgIHZlcnRleENvbG9yczogVEhSRUUuRmFjZUNvbG9ycyxcclxuICAgICAgICAvLyAgICAgbW9ycGhUYXJnZXRzOiB0cnVlXHJcbiAgICAgICAgLy8gfSApICk7XHJcbiAgICAgICAgcGFibG8uc2NhbGUuc2V0KCAxLCAxLCAxICk7XHJcbiAgICAgICAgc2NlbmUuYWRkKCBwYWJsbyApO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhzY2VuZSk7XHJcblxyXG4gICAgICAgIG1peGVyID0gbmV3IFRIUkVFLkFuaW1hdGlvbk1peGVyKCBwYWJsbyApO1xyXG5cclxuICAgICAgICB2YXIgY2xpcCA9IFRIUkVFLkFuaW1hdGlvbkNsaXAuQ3JlYXRlRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2UoICdza2VsZXRhbEFjdGlvbi4wMDEnLCBnZW9tZXRyeS5tb3JwaFRhcmdldHMsIDMwLCBmYWxzZSApO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNsaXApO1xyXG4gICAgICAgIG1peGVyLmNsaXBBY3Rpb24oIGNsaXAgKS5zZXREdXJhdGlvbiggMiApLnBsYXkoKTtcclxuXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSB3YXRlciBsZXZlbFxyXG4gICAgd2F0ZXJMZXZlbCA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xyXG4gICAgd2F0ZXJMZXZlbC5hZGQoIG5ldyBUSFJFRS5NZXNoKFxyXG4gICAgICAgIG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgxMDAsIDYwLCA3MCksXHJcblxyXG4gICAgICAgIG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCgge1xyXG4gICAgICAgICAgICBjb2xvcjogMHgxNTYyODksXHJcbiAgICAgICAgICAgIGVtaXNzaXZlOiAweDA3MjUzNCxcclxuICAgICAgICAgICAgc2lkZTogVEhSRUUuRG91YmxlU2lkZSxcclxuICAgICAgICAgICAgc2hhZGluZzogVEhSRUUuRmxhdFNoYWRpbmcsXHJcbiAgICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLFxyXG4gICAgICAgICAgICBvcGFjaXR5OiAwLjRcclxuICAgICAgICB9IClcclxuICAgICkgKTtcclxuXHJcbiAgICAvLyBTZXQgaXQgYXQgdGhlIGJvdHRvbSBvZiB0aGUgYXF1YXJpdW1cclxuICAgIHdhdGVyTGV2ZWwucG9zaXRpb24ueSA9IC00Ljk5O1xyXG5cclxuICAgIC8vIEFkZCB0byBzY2VuZVxyXG4gICAgc2NlbmUuYWRkKCB3YXRlckxldmVsICk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBnbGFzcyBhcXVhcml1bVxyXG4gICAgYXF1YXJpdW0gPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuICAgIGFxdWFyaXVtLmFkZCggbmV3IFRIUkVFLk1lc2goXHJcbiAgICAgICAgbmV3IFRIUkVFLkJveEdlb21ldHJ5KDEwMCwgNzAsIDcwKSxcclxuXHJcbiAgICAgICAgbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKCB7XHJcbiAgICAgICAgICAgIGNvbG9yOiAweEUwRUFFNyxcclxuICAgICAgICAgICAgLy8gZW1pc3NpdmU6IDB4MDcyNTM0LFxyXG4gICAgICAgICAgICBzaWRlOiBUSFJFRS5Eb3VibGVTaWRlLFxyXG4gICAgICAgICAgICBzaGFkaW5nOiBUSFJFRS5GbGF0U2hhZGluZyxcclxuICAgICAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuMlxyXG4gICAgICAgIH0gKVxyXG4gICAgKSApO1xyXG5cclxuICAgIC8vIEFkZCB0byBzY2VuZVxyXG4gICAgc2NlbmUuYWRkKCBhcXVhcml1bSApO1xyXG5cclxuICAgIC8vXHJcblxyXG4gICAgdmFyIG51bVBvaW50cyA9IDUwO1xyXG5cclxuICAgIHNwbGluZSA9IG5ldyBUSFJFRS5TcGxpbmVDdXJ2ZTMoW1xyXG4gICAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDApLFxyXG4gICAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKDIwLCAwLCAyMCksXHJcbiAgICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoNDAsIDAsIDApLFxyXG4gICAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIC00MCksXHJcbiAgICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoLTI1LCAwLCAwKSxcclxuICAgICAgICBuZXcgVEhSRUUuVmVjdG9yMygtMTUsIDAsIDUpLFxyXG4gICAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKC0xMCwgMCwgLTIwKSxcclxuICAgICAgICBuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAwKV0pO1xyXG5cclxuICAgIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7XHJcbiAgICAgICAgY29sb3I6IDB4ZmYwMGYwLFxyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLkdlb21ldHJ5KCk7XHJcbiAgICB2YXIgc3BsaW5lUG9pbnRzID0gc3BsaW5lLmdldFBvaW50cyhudW1Qb2ludHMpO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BsaW5lUG9pbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZ2VvbWV0cnkudmVydGljZXMucHVzaChzcGxpbmVQb2ludHNbaV0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHVuY29tbWVudCBpZiB3ZSB3YW50IHRvIHNob3cgdGhlIHBhdGhcclxuICAgIC8vIGxpbmUgPSBuZXcgVEhSRUUuTGluZShnZW9tZXRyeSwgbWF0ZXJpYWwpO1xyXG4gICAgLy8gc2NlbmUuYWRkKGxpbmUpO1xyXG5cclxuICAgIC8vXHJcblxyXG4gICAgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcigpO1xyXG4gICAgcmVuZGVyZXIuc2V0Q2xlYXJDb2xvciggMHhmMGYwZjAgKTtcclxuICAgIHJlbmRlcmVyLnNldFBpeGVsUmF0aW8oIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvICk7XHJcbiAgICByZW5kZXJlci5zZXRTaXplKCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0ICk7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7XHJcblxyXG4gICAgLy8gUmVuZGVyIHRoZSBvYmplY3RzIGluIHRoZSBzY2VuZSBpbiB0aGUgb3JkZXIgdGhleSB3ZXJlIGNyZWF0ZWRcclxuICAgIHJlbmRlcmVyLnNvcnRPYmplY3RzID0gZmFsc2U7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBjb250cm9scyB0byByb3RhdGUgdGhlIGFxdWFyaXVtXHJcbiAgICB2YXIgb3JiaXQgPSBuZXcgVEhSRUUuT3JiaXRDb250cm9scyggY2FtZXJhLCByZW5kZXJlci5kb21FbGVtZW50ICk7XHJcbiAgICBvcmJpdC5lbmFibGVab29tID0gZmFsc2U7XHJcblxyXG4gICAgLy8gTG9jayB0aGUgcm90YXRpb24gaW4geC1heGlzLCBtZWFuaW5nIHdlIGNhbid0IGxvb2sgYWJvdmUgb3IgYmVsb3cgdGhlIGFxdWFyaXVtXHJcbiAgICBvcmJpdC5taW5Qb2xhckFuZ2xlID0gTWF0aC5QSSAvIDI7IC8vIHJhZGlhbnNcclxuICAgIG9yYml0Lm1heFBvbGFyQW5nbGUgPSBNYXRoLlBJIC8gMjsgLy8gcmFkaWFuc1xyXG5cclxuICAgIC8vIEhvdyBmYXIgeW91IGNhbiBvcmJpdCBob3Jpem9udGFsbHksIHVwcGVyIGFuZCBsb3dlciBsaW1pdHMuXHJcbiAgICAvLyBJZiBzZXQsIG11c3QgYmUgYSBzdWItaW50ZXJ2YWwgb2YgdGhlIGludGVydmFsIFsgLSBNYXRoLlBJLCBNYXRoLlBJIF0uXHJcbiAgICBvcmJpdC5taW5BemltdXRoQW5nbGUgPSAtIE1hdGguUEkgLyAyOyAvLyByYWRpYW5zXHJcbiAgICBvcmJpdC5tYXhBemltdXRoQW5nbGUgPSBNYXRoLlBJIC8gMjsgLy8gcmFkaWFuc1xyXG5cclxuICAgIC8vXHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdyZXNpemUnLCBvbldpbmRvd1Jlc2l6ZSwgZmFsc2UgKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uV2luZG93UmVzaXplKCkge1xyXG5cclxuICAgIGNhbWVyYS5hc3BlY3QgPSB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XHJcblxyXG4gICAgcmVuZGVyZXIuc2V0U2l6ZSggd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCApO1xyXG5cclxufVxyXG5cclxuLy9cclxudmFyIHByZXZUaW1lID0gRGF0ZS5ub3coKTtcclxuZnVuY3Rpb24gYW5pbWF0ZUZpc2goKSB7XHJcbiAgICBpZiAoY291bnRlciA8PSAxKSB7XHJcbiAgICAgICAgdmFyIHNwbGluZVBvaW50ID0gc3BsaW5lLmdldFBvaW50QXQoY291bnRlcik7XHJcblxyXG4gICAgICAgIHNwbGluZVBvaW50LnkgLT0gZGVwbGV0ZUZhY3RvciAqIDMwO1xyXG5cclxuXHJcbiAgICAgICAgaWYocGFibG8ucG9zaXRpb24ueSA8IC0zNSAmJiAhcGFibG9Jc0RlYWQpe1xyXG4gICAgICAgICAgICBwYWJsby5wb3NpdGlvbi55ID0gLTM1O1xyXG4gICAgICAgICAgICBwYWJsb0lzRGVhZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHByZXZUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICB9IGVsc2UgaWYocGFibG9Jc0RlYWQpIHtcclxuICAgICAgICAgICAgdmFyIHRpbWUgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgICAgICAgICAgLy8gUnVuIHRoZSBhbmltYXRpb24gd2hlbiBQYWJsbyBoaXRzIHRoZSBib3R0b20gb2YgdGhlIHRhbmtcclxuICAgICAgICAgICAgbWl4ZXIudXBkYXRlKCAoIHRpbWUgLSBwcmV2VGltZSApICogMC4wMDEgKTtcclxuXHJcbiAgICAgICAgICAgIHByZXZUaW1lID0gdGltZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhYmxvLnBvc2l0aW9uLnggPSBzcGxpbmVQb2ludC54O1xyXG4gICAgICAgICAgICBwYWJsby5wb3NpdGlvbi55ID0gKHdhdGVyTGV2ZWwuc2NhbGUueSAqIDQxKSAtIDM1O1xyXG4gICAgICAgICAgICBwYWJsby5wb3NpdGlvbi56ID0gc3BsaW5lUG9pbnQuejtcclxuXHJcbiAgICAgICAgICAgIHRhbmdlbnQgPSBzcGxpbmUuZ2V0VGFuZ2VudEF0KGNvdW50ZXIpLm5vcm1hbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgYXhpcy5jcm9zc1ZlY3RvcnModXAsIHRhbmdlbnQpLm5vcm1hbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJhZGlhbnMgPSBNYXRoLmFjb3ModXAuZG90KHRhbmdlbnQpKTtcclxuXHJcbiAgICAgICAgICAgIHBhYmxvLnF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZShheGlzLCByYWRpYW5zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvdW50ZXIgKz0gMC4wMDFcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY291bnRlciA9IDA7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFuaW1hdGUoKSB7XHJcblxyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCBhbmltYXRlICk7XHJcblxyXG4gICAgcmVuZGVyKCk7XHJcbn1cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gY2FsY3VsYXRlV2F0ZXJMZXZlbCggY29uc3VtcHRpb24gKSB7XHJcbiAgICB2YXIgYXZnQ29uc3VtcHRpb24gPSAxNjA7XHJcbiAgICB2YXIgZENvbnN1bXB0aW9uID0gYXZnQ29uc3VtcHRpb24gLSBjb25zdW1wdGlvbjtcclxuICAgIHZhciBwZXJjID0gZENvbnN1bXB0aW9uIC8gYXZnQ29uc3VtcHRpb247XHJcblxyXG4gICAgcmV0dXJuKHBlcmMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRXYXRlckxldmVsKCBjb25zICl7XHJcbiAgICB3YXRlckxldmVsVGFyZ2V0ICs9IGNhbGN1bGF0ZVdhdGVyTGV2ZWwoY29ucyk7XHJcbiAgICBpZih3YXRlckxldmVsVGFyZ2V0ID4gMSl7XHJcbiAgICAgICAgd2F0ZXJMZXZlbFRhcmdldCA9IDE7XHJcbiAgICB9IGVsc2UgaWYod2F0ZXJMZXZlbFRhcmdldCA8IDApe1xyXG4gICAgICAgIHdhdGVyTGV2ZWxUYXJnZXQgPSAwO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRMYXN0RGF5Q29uc3VtcHRpb24oKXtcclxuICAgIC8vIGNvbnNvbGUubG9nKHBhc3REYXksIGN1cnJlbnREYXksIHVzZXIuY3VycmVudERheSwgcGFzdERheSAhPT0gdXNlci5jdXJyZW50RGF5KTtcclxuICAgIGlmKHVzZXIuY3VycmVudERheSAhPT0gY3VycmVudERheSl7XHJcbiAgICAgICAgY3VycmVudERheSA9IHVzZXIuY3VycmVudERheTtcclxuXHJcbiAgICAgICAgaWYoY3VycmVudERheSAtMSA8IDApe1xyXG4gICAgICAgICAgICBwYXN0RGF5ID0gNjtcclxuICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgIHBhc3REYXkgPSBjdXJyZW50RGF5IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRXYXRlckxldmVsKGRhdGFbcGFzdERheV0ud2F0ZXIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKCkge1xyXG5cclxuICAgIGFuaW1hdGVGaXNoKCk7XHJcblxyXG4gICAgZ2V0TGFzdERheUNvbnN1bXB0aW9uKCk7XHJcblxyXG4gICAgaWYod2F0ZXJMZXZlbC5zY2FsZS55ID4gd2F0ZXJMZXZlbFRhcmdldCAmJiB3YXRlckxldmVsLnNjYWxlLnkgPiAwKXtcclxuICAgICAgICAvLyBJZiB0aGUgd2F0ZXIgaXNuJ3QgYWxyZWFkeSBjb21wbGV0ZWx5IGRlcGxldGVkLCBsb3dlciB0aGUgd2F0ZXIgbGV2ZWxcclxuICAgICAgICB3YXRlckxldmVsLnNjYWxlLnkgLT0gZGVwbGV0ZUZhY3RvcjtcclxuICAgICAgICB3YXRlckxldmVsLnBvc2l0aW9uLnkgLT0gKGRlcGxldGVGYWN0b3IgKiAzMCk7XHJcbiAgICB9IGVsc2UgaWYod2F0ZXJMZXZlbC5zY2FsZS55IDwgd2F0ZXJMZXZlbFRhcmdldCAmJiB3YXRlckxldmVsLnNjYWxlLnkgPD0gMSl7XHJcbiAgICAgICAgLy8gSWYgdGhlIHdhdGVyIGlzbid0IGFscmVhZHkgY29tcGxldGVseSBkZXBsZXRlZCwgbG93ZXIgdGhlIHdhdGVyIGxldmVsXHJcbiAgICAgICAgd2F0ZXJMZXZlbC5zY2FsZS55ICs9IGRlcGxldGVGYWN0b3I7XHJcbiAgICAgICAgd2F0ZXJMZXZlbC5wb3NpdGlvbi55ICs9IChkZXBsZXRlRmFjdG9yICogMzApO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgLy8gRE8gTk9USElOR1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcmVyLnJlbmRlciggc2NlbmUsIGNhbWVyYSApO1xyXG5cclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvanMvYXBwLmpzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }
/******/ ]);